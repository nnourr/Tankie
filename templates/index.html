<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>

<body>
    <div class="top-container">
        <div class="title">Welcome To TANK1E
            <div class="subtitle">A WiFi Controlled Raspberry Pi tank</div>
        </div>
        <div class="top-controls-container">
            <div class="box-container hidden" id="box-container">
                <div class="box invis"></div>
                <div class="box" id="w-key">w</div>
                <div class="box invis"></div>
                <div class="box" id="a-key">a</div>
                <div class="box" id="s-key">s</div>
                <div class="box" id="d-key">d</div>
            </div>
            <img src="http://99.225.212.239:8000/" class="stream-display hidden" id="stream-display">

            <div class="password-entry-container" id="password-entry-container">
                <div class="password-entry-title subtitle">Enter The Password To Control Tank1e:</div>
                <input type="text" class="password-entry-box" id="password-entry-box">
                <div class="password-submit-button" id="password-submit-button">SUBMIT</div>
            </div>
            <video class="demo-video stream-display" id="demo-video" autoplay muted loop><source src="/static/tank1eVid.mp4" type="video/mp4"></video>
        </div>
    </div>

    <div class="about-us-container reverse">
        <div class="about-pi-info-container">
            <div class="about-us-subtitle subtitle">About Tank1e</div>
            <div class="about-us-info">HI I'm Tank1e! From my memory I can tell that I'm a raspberryPi 4 based car programmed using python. Flask and Ajax Requests allow me to be controled over the internet through this website. Shoot me an email (link to contact section) to get
                a view into my life through my 1080p sensor!</div>
        </div>
        <div class="photo-container">
            <div class="photo" id="piphoto"></div>
        </div>
    </div>

    <div class="about-us-container">
        <div class="photo-container">
            <div class="photo" id="familyphoto"></div>
            <div style="text-align:center;height: 0;">
                <span class='dot familyphoto active' id="4"></span>
                <span class='dot familyphoto' id="3"></span>
                <span class='dot familyphoto' id="2"></span>
                <span class='dot familyphoto' id="1"></span>
            </div>
            <div class="individual-info-container">
                <div id="individual-info-name"></div>
                <div id="individual-info-text"></div>
                <div class="social-media-container">
                    <div class="social-links" id="linkedin">
                        <?xml version="1.0" encoding="iso-8859-1"?>
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 310 310" style="enable-background:new 0 0 310 310;" xml:space="preserve">
                            <g id="XMLID_801_">
                                <path id="XMLID_802_" d="M72.16,99.73H9.927c-2.762,0-5,2.239-5,5v199.928c0,2.762,2.238,5,5,5H72.16c2.762,0,5-2.238,5-5V104.73
                                    C77.16,101.969,74.922,99.73,72.16,99.73z"/>
                                <path id="XMLID_803_" d="M41.066,0.341C18.422,0.341,0,18.743,0,41.362C0,63.991,18.422,82.4,41.066,82.4
                                    c22.626,0,41.033-18.41,41.033-41.038C82.1,18.743,63.692,0.341,41.066,0.341z"/>
                                <path id="XMLID_804_" d="M230.454,94.761c-24.995,0-43.472,10.745-54.679,22.954V104.73c0-2.761-2.238-5-5-5h-59.599
                                    c-2.762,0-5,2.239-5,5v199.928c0,2.762,2.238,5,5,5h62.097c2.762,0,5-2.238,5-5v-98.918c0-33.333,9.054-46.319,32.29-46.319
                                    c25.306,0,27.317,20.818,27.317,48.034v97.204c0,2.762,2.238,5,5,5H305c2.762,0,5-2.238,5-5V194.995
                                    C310,145.43,300.549,94.761,230.454,94.761z"/>
                            </g>
                        </svg>
                    </div>
                    <div class="social-links" id="github">
                        <svg class="social-links" width="32px" height="32px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 0.396c-8.839 0-16 7.167-16 16 0 7.073 4.584 13.068 10.937 15.183 0.803 0.151 1.093-0.344 1.093-0.772 0-0.38-0.009-1.385-0.015-2.719-4.453 0.964-5.391-2.151-5.391-2.151-0.729-1.844-1.781-2.339-1.781-2.339-1.448-0.989 0.115-0.968 0.115-0.968 1.604 0.109 2.448 1.645 2.448 1.645 1.427 2.448 3.744 1.74 4.661 1.328 0.14-1.031 0.557-1.74 1.011-2.135-3.552-0.401-7.287-1.776-7.287-7.907 0-1.751 0.62-3.177 1.645-4.297-0.177-0.401-0.719-2.031 0.141-4.235 0 0 1.339-0.427 4.4 1.641 1.281-0.355 2.641-0.532 4-0.541 1.36 0.009 2.719 0.187 4 0.541 3.043-2.068 4.381-1.641 4.381-1.641 0.859 2.204 0.317 3.833 0.161 4.235 1.015 1.12 1.635 2.547 1.635 4.297 0 6.145-3.74 7.5-7.296 7.891 0.556 0.479 1.077 1.464 1.077 2.959 0 2.14-0.020 3.864-0.020 4.385 0 0.416 0.28 0.916 1.104 0.755 6.4-2.093 10.979-8.093 10.979-15.156 0-8.833-7.161-16-16-16z"/>
                        </svg>
                    </div>

                    <div class="social-links" id="email">
                        <?xml version="1.0" encoding="iso-8859-1"?>
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 490 490" style="enable-background:new 0 0 490 490;" xml:space="preserve">
                            <g>
                                <path d="M295.2,257.8L251.4,295c-3.5,2.9-8.6,2.9-12,0l-43.8-37.1L16.7,409.1h456.6L295.2,257.8z"/>
                                <polygon points="0,92.2 0,397.8 180.1,245 			"/>
                                <polygon points="16.7,80.9 245,274.6 473.3,80.9 			"/>
                                <polygon points="309.9,245 490,397.8 490,92.2 			"/>
                            </g>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="about-us-info-container">
            <div class="about-us-subtitle subtitle">About Us</div>
            <div class="about-us-info">We are a team of software engineers and mathematical scientists studying at the University of Guelph who combined their individual strengths to produce a functioning tank with a live video feed. In doing so, we gained a lot knowledge on a
                variety of subjects. To begin, we started the project by using the engineering design process to develop a plan of execution for our tank. Following this design process and applying our knowledge of agile development and ensemble programming
                allowed us to get a feel for a real development environment. Within this environment, we learned how to collaborate with one another and utilize our collective knowledge to make for a complete final product.</div>
        </div>
    </div>

    <div class="gallery">
        <div class="subtitle gallery-title">Gallery</div>
        <div class="gallery-image-container">
            <div class="gallery-image" id=2></div>
            <div class="gallery-image" id=3></div>
            <div class="gallery-image" id=7></div>
            <div class="gallery-image" id=4></div>
            <div class="gallery-image" id=5></div>
            <div class="gallery-image" id=6></div>
        </div>
    </div>

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" async defer>
        var techOrange = "rgb(46, 206, 235)"
        var background = "rgb(32, 33, 36)"

        var buttons = Array.from(document.querySelectorAll('.box:not(.hidden)'))
        buttons.map((x) => {
            x.addEventListener("touchstart", function(x) {
                doMove(x.target.textContent)
            })
            x.addEventListener("touchend", function(x) {
                stop(x.target.textContent)
            })
        })

        function stop(key) {
            if (buttonDown === true) {
                $.get("/release");
                buttonDown = false;
                document.getElementById(key + "-key").style.backgroundColor = null
                document.getElementById(key + "-key").style.color = null
            }
        }

        function doMove(key) {
            if (key === 'w' && buttonDown === false) {
                $.get("/forward");
                buttonDown = true;
                document.getElementById("w-key").style.backgroundColor = techOrange
                document.getElementById("w-key").style.color = background

            }
            if (key === 's' && buttonDown === false) {
                $.get("/backward");
                buttonDown = true;
                document.getElementById("s-key").style.backgroundColor = techOrange
                document.getElementById("s-key").style.color = background
            }
            if (key === 'a' && buttonDown === false) {
                $.get("/left");
                buttonDown = true;
                document.getElementById("a-key").style.backgroundColor = techOrange
                document.getElementById("a-key").style.color = background
            }
            if (key === 'd' && buttonDown === false) {
                $.get("/right");
                buttonDown = true;
                document.getElementById("d-key").style.backgroundColor = techOrange
                document.getElementById("d-key").style.color = background
            }
        }

        var buttonDown = false;
        document.body.addEventListener('keydown', function(event) {
            doMove(event.key)
        });
        document.body.addEventListener('keyup', function(event) {
            stop(event.key)
        });

        var currentlyActive = 0

        var galleryControl = Array.from(document.getElementsByClassName("dot"))
        var individualInfo = [
            ["Noureldeen Ahmed", "Second Year Software Engineering Major, Project Management Minor", "https://www.linkedin.com/in/nnourr", "https://github.com/nnourr", "nourqwerty123@gmail.com"],
            ["Taran", "Second Year Software Engineering Major, Media & Cinema Studies Minor, Informations Technology Professional ", "https://github.com/TsarangF", "https://github.com/TsarangF", "taran21sarang@gmail.com"],
            ["Manjot Singh", "Second Year Software Engineering Major, Project Management Minor", "https://www.linkedin.com/in/harrymanjot-singh", "https://github.com/Monkeyharry53", "manjotm.h@gmail.com"],
            ["Nav", "Fourth Year Mathermatical Sciences Major", "https://http://linkedin.com/in/navjot-singh-6481b816b  ", "https://github.com/nnourr", "notnaav@icloud.com"],
        ]

        document.getElementById("individual-info-name").textContent = individualInfo[currentlyActive][0]
        document.getElementById("individual-info-text").textContent = individualInfo[currentlyActive][1]

        galleryControl.map((x, i) => {
            if (i > 4) {
                i -= 4
            }
            window.setTimeout(function() {
                document.getElementById(x.classList[1]).style.backgroundImage = "url(/static/" + x.classList[1] + (i + 1) + ".jpg)"
            }, (500))
            x.addEventListener("click", function(y) {
                document.getElementById(y.target.classList[1]).style.backgroundImage = "url(/static/" + y.target.classList[1] + y.target.id + ".jpg)"
                galleryControl[currentlyActive].classList.remove("active")
                y.target.classList.add("active")
                currentlyActive = 4 - (y.target.id)

                if (currentlyActive === 3) {
                    document.getElementById("github").style.display = "none"
                } else {
                    document.getElementById("github").style.display = "block"
                }

                document.getElementById("individual-info-name").textContent = individualInfo[currentlyActive][0]
                document.getElementById("individual-info-text").textContent = individualInfo[currentlyActive][1]
            })
        })
        document.getElementById("linkedin").addEventListener("click", function() {
            goToLink(2)
        })
        document.getElementById("github").addEventListener("click", function() {
            goToLink(3)
        })
        document.getElementById("email").addEventListener("click", function() {
            goToLink(4)
        })

        function goToLink(index) {
            if (index === 4) {
                location.href = 'mailto:' + individualInfo[currentlyActive][index];
            } else {
                window.open(individualInfo[currentlyActive][index], '_blank');
            }
        }

        var galleryImage = Array.from(document.getElementsByClassName("gallery-image"))
        galleryImage.map((x) => {
            x.style.backgroundImage = "url('/static/piphoto" + x.id + ".jpg'"
        })

        var submitButton = document.getElementById("password-submit-button")
        submitButton.addEventListener("click", function(btn) {
            checkPass()
        })
        var passwordBox = document.getElementById("password-entry-box")
        passwordBox.addEventListener("keyup", function(btn) {
            if (event.code === 'Enter') {
                checkPass()
            }
        })

        var passwordConainer = document.getElementById("password-entry-container")
        var streamDisplay = document.getElementById("stream-display")
        var controls = document.getElementById("box-container")

        function checkPass() {
            $.post("/auth", {
                    password: passwordBox.value
                },
                function(result) {
                    console.log(result);
                    if (result == "True") {
                        video.classList.add("hidden")
                        video.pause()
                        passwordConainer.classList.add("hidden")
                        streamDisplay.classList.remove("hidden")
                        controls.classList.remove("hidden")
                    } else {
                        console.log(result)
                    }
                })
            passwordBox.value = ""
        }

        var video = document.getElementById("demo-video")
        video.volume = 0.7
        video.addEventListener("click", function(x) {
            if (video.muted === false) {
                video.muted = true
            } else {
                video.muted = false
            }
        })
    </script>
</body>

</html>